The functions for phyloseq objects are limited, but we can melt it into a dataframe for more ploting and analysis options using *psmelt*

```
pd_rarefy <- psmelt(phylo_rarefy_top50_ratio)
head(pd_rarefy)
write.csv(pd_rarefy,"pd_rarefy.csv") #can load the .csv in future. 

pd <- psmelt(phylo_ratio)
write.csv(pd,"pd.csv") 
```
## Barplot using ggplot
```
W0_Family<- ggplot(pd_rarefy[(pd_rarefy$Source == 0),], aes(x=TreatmentWeek, y=Abundance, fill=Family)) +
    geom_bar(stat="identity") + facet_wrap(~Family, nrow=3) + coord_flip()
    
W0_Family + theme(axis.title.y = element_blank(), 
        axis.text.y = element_text(size=8,angle=0,hjust=0.5,vjust=0.5,color="Black"),
        axis.text.x = element_text(size=8,color="Black"),
        axis.ticks = element_blank(),
        legend.text = element_text(size = 10),
        legend.key.size = unit(0.5, "cm"),legend.key.height = unit(0.5, "cm")
        )
```
